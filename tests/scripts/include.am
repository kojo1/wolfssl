# vim:ft=automake
# included from Top Level Makefile.am
# All paths should be given relative to the root



if BUILD_SNIFFTEST
dist_noinst_SCRIPTS+= scripts/sniffer-testsuite.test
endif

if BUILD_EXAMPLE_SERVERS

dist_noinst_SCRIPTS+= tests/scripts/resume.test

EXTRA_DIST+= tests/scripts/benchmark.test
EXTRA_DIST+= tests/scripts/memtest.sh

if BUILD_CRL
# make revoked test rely on completion of resume test
dist_noinst_SCRIPTS+= tests/scripts/crl-revoked.test
scripts/crl-revoked.log: tests/scripts/resume.log
endif

if BUILD_OCSP
dist_noinst_SCRIPTS+= tests/scripts/ocsp.test
endif

if BUILD_OCSP_STAPLING
dist_noinst_SCRIPTS+= tests/scripts/ocsp-stapling.test
scripts/ocsp-stapling.log: tests/scripts/ocsp.log
dist_noinst_SCRIPTS+= tests/scripts/ocsp-stapling-with-ca-as-responder.test
tests/scripts/ocsp-stapling-with-ca-as-responder.log: tests/scripts/ocsp-stapling.log
endif

if BUILD_OCSP_STAPLING_V2
dist_noinst_SCRIPTS+= tests/scripts/ocsp-stapling2.test

if BUILD_OCSP_STAPLING
tests/scripts/ocsp-stapling2.log: tests/scripts/ocsp-stapling-with-ca-as-responder.log
else
tests/scripts/ocsp-stapling2.log: tests/scripts/ocsp.log
endif

endif

if BUILD_PSK
dist_noinst_SCRIPTS+= tests/scripts/psk.test
endif

if BUILD_TRUST_PEER_CERT
dist_noinst_SCRIPTS+= tests/scripts/trusted_peer.test
endif

if BUILD_PKCALLBACKS
dist_noinst_SCRIPTS+= tests/scripts/pkcallbacks.test
tests/scripts/pkcallbacks.log: tests/scripts/resume.log
endif

if BUILD_TLS13
dist_noinst_SCRIPTS+= tests/scripts/tls13.test
endif

endif # end of BUILD_EXAMPLE_SERVERS

if BUILD_EXAMPLE_CLIENTS
if !BUILD_IPV6
dist_noinst_SCRIPTS+= tests/scripts/external.test
dist_noinst_SCRIPTS+= tests/scripts/google.test
dist_noinst_SCRIPTS+= tests/scripts/openssl.test
endif
endif

EXTRA_DIST +=  tests/scripts/testsuite.pcap \
               tests/scripts/ping.test

# leave openssl.test as extra until non bash works
EXTRA_DIST +=  tests/scripts/openssl.test

EXTRA_DIST +=  tests/scripts/dertoc.pl
